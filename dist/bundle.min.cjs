"use strict";var e=require("jsdoc/env"),a=require("path");function n(e,n){this.conf.submodule??={};const{pwd:t,conf:{submodule:{roots:s,ignore:o},source:i}}=this,c=Object.entries(s||{}).sort(((e,a)=>a[1].split("/").length-e[1].split("/").length));for(const e of i.include)c.push(["",e]);let l=a.relative(t,e.meta.path);for(const e of c){const[a,n]=e;if(l.includes(n)){l=""!=a?l.replace(n,a):l.replace(new RegExp(`${n}/?`),a);break}}const u=e.meta.filename.match(/^.+(?=\..+$)/)[0],d=n?.value?.name||(""===l?u:(o||["index"]).includes(u)||this.leaf?l:`${l}/${u}`);Object.assign(e,{kind:"module",name:d})}exports.defineTags=a=>{const t={canHaveType:!0,canHaveName:!0,isNamespace:!1,mustHaveValue:!1,mustNotHaveDescription:!0,mustNotHaveValue:!1};a.defineTag("submodule",{...t,onTagged:n.bind(e)}),a.defineTag("leafmodule",{...t,onTagged:n.bind({...e,leaf:!0})})};
